# 🌐 サブドメイン設定ガイド

お名前.comで購入したドメインにサブドメインを設定する詳細な手順です。

## 📋 サブドメインとは

サブドメインは、メインドメインの前に追加するドメイン部分です。
- メインドメイン: `yourdomain.com`
- サブドメイン例: `blog.yourdomain.com`, `admin.yourdomain.com`, `www.yourdomain.com`

## 🎯 サブドメイン設定の2つのパターン

### パターン1: 別のGitHubリポジトリをサブドメインで公開
例: `blog.yourdomain.com` → 別のリポジトリ（例: `synthera-blog`）を公開

### パターン2: 同じリポジトリの特定フォルダをサブドメインで公開
例: `admin.yourdomain.com` → `admin/` フォルダ内のコンテンツを公開

### パターン3: メインドメインと同じコンテンツをサブドメインでも表示
例: `www.yourdomain.com` → メインドメインと同じコンテンツ

---

## 📦 パターン1: 別のGitHubリポジトリをサブドメインで公開

この方法は、別のGitHubリポジトリの内容をサブドメインで公開する場合に使用します。

### 手順1: 新しいGitHubリポジトリを準備

1. GitHubで新しいリポジトリを作成（例: `synthera-blog`）
2. そのリポジトリでもGitHub Pagesを有効化
3. GitHub PagesのURLを確認（例: `https://kiichi-1000.github.io/synthera-blog/`）

### 手順2: お名前.comでのDNS設定（CNAMEレコード）

#### 2-1. お名前.comにログイン

1. ブラウザで https://www.onamae.com/ を開く
2. ページ右上の「**ログイン**」ボタンをクリック
3. お名前.com IDとパスワードを入力
4. 「**ログイン**」ボタンをクリック

#### 2-2. DNS設定ページに移動

1. ログイン後、ダッシュボードが表示されます
2. ページ上部のメニューから「**ドメイン**」を探す
   - または、左サイドメニューから「**ドメイン**」を探す
3. 「**ドメイン**」をクリック
4. 「**ネームサーバー設定**」または「**DNS設定**」をクリック

#### 2-3. 設定するドメインを選択

1. 購入したドメインの一覧が表示されます
2. 設定したいドメイン名を見つける
3. そのドメインの「**DNS設定**」または「**ネームサーバー設定**」のリンクをクリック

#### 2-4. CNAMEレコードを追加

1. 現在のDNSレコード一覧が表示されます
2. 「**レコード追加**」または「**追加**」ボタンをクリック
   - ページ上部または下部にボタンがあります
3. 「**レコードタイプ**」のドロップダウンメニューをクリック
4. メニューから「**CNAME**」を選択
5. 以下の情報を入力：
   - **ホスト名**: サブドメイン名だけを入力
     - 例: `blog` を入力（`blog.yourdomain.com` ではなく）
     - 例: `admin` を入力（`admin.yourdomain.com` ではなく）
   - **値（または名前）**: `kiichi-1000.github.io` を入力
     - **重要**: リポジトリ名（`synthera-web`など）は含めない
     - **重要**: `.github.io` までを含める
   - **TTL**: `3600` を入力、または既定値のまま

6. 「**追加**」または「**保存**」ボタンをクリック

#### 2-5. 設定を保存

1. 全てのレコードを追加したら、ページ下部の「**保存**」または「**適用**」ボタンをクリック
2. 確認ダイアログが表示されたら「**OK**」または「**確認**」をクリック
3. 「設定が完了しました」などのメッセージが表示されることを確認

### 手順3: 新しいリポジトリでGitHub Pagesにサブドメインを設定

1. 新しいリポジトリ（例: `synthera-blog`）のSettingsページを開く
2. 左サイドバーの「**Pages**」をクリック
3. 「**Custom domain**」セクションに、サブドメインを入力（例: `blog.yourdomain.com`）
4. 「**Save**」ボタンをクリック
5. 「**Enforce HTTPS**」チェックボックスを有効化（表示されたら）

---

## 📂 パターン2: 同じリポジトリの特定フォルダをサブドメインで公開

この方法は、同じリポジトリ内の特定フォルダをサブドメインで公開する場合に使用します。

### 手順1: リポジトリ内にサブドメイン用のフォルダを作成

1. プロジェクトディレクトリで、サブドメイン用のフォルダを作成：
   ```bash
   cd /Users/tsukuikiichi/Documents/synthera-web-1
   mkdir admin
   ```
   - 例: `admin/` フォルダを作成して、`admin/index.html` を配置

2. そのフォルダ内に `index.html` を作成

### 手順2: GitHub Actionsでサブドメイン用サイトをデプロイ

**この方法は複雑なため、別のリポジトリを使用する方が簡単です。**

---

## 🔄 パターン3: wwwサブドメインを設定（メインドメインと同じ）

メインドメインと全く同じコンテンツを `www.yourdomain.com` でも表示する場合。

### 手順1: お名前.comでのDNS設定（CNAMEレコード）

1. お名前.comにログイン: https://www.onamae.com/
2. 「**ドメイン**」→「**DNS設定**」をクリック
3. 設定したいドメインを選択
4. 「**レコード追加**」ボタンをクリック
5. 以下の設定を入力：

**設定内容:**
- **レコードタイプ**: `CNAME` を選択
- **ホスト名**: `www` と入力
  - **注意**: `www.yourdomain.com` ではなく、`www` だけ
- **値**: `kiichi-1000.github.io` と入力
  - **注意**: リポジトリ名は含めない
- **TTL**: `3600` または既定値のまま

6. 「**追加**」ボタンをクリック
7. 「**保存**」ボタンをクリック

### 手順2: GitHub Pagesでwwwサブドメインを設定

1. https://github.com/Kiichi-1000/synthera-web を開く
2. 「**Settings**」タブをクリック
3. 左サイドバーの「**Pages**」をクリック
4. 「**Custom domain**」セクションを確認
   - 既に `yourdomain.com` が設定されている場合、そのまま
5. 「**Custom domain**」テキストボックスに、`www.yourdomain.com` を追加できるか確認
   - **注意**: GitHub Pagesでは、1つのリポジトリに1つのカスタムドメインのみ設定可能
   - メインドメイン（`yourdomain.com`）とwww（`www.yourdomain.com`）は、どちらか一方を設定
   - 通常は、メインドメインを設定し、wwwはCNAMEレコードで同じサイトにリダイレクト

### 手順3: wwwとメインドメインを同じサイトにする（推奨）

メインドメイン（`yourdomain.com`）が既に設定されている場合、www用のCNAMEレコードを追加するだけで、自動的に同じサイトが表示されます。

---

## 📝 サブドメイン設定の具体例

### 例1: blogサブドメインを設定

**お名前.comでの設定:**
```
レコードタイプ: CNAME
ホスト名: blog
値: kiichi-1000.github.io
TTL: 3600
```

**GitHubでの設定:**
- リポジトリ: `synthera-blog`（新しいリポジトリ）
- Custom domain: `blog.yourdomain.com`

**結果:** `blog.yourdomain.com` で新しいリポジトリの内容が表示される

### 例2: adminサブドメインを設定（管理者ページ用）

**お名前.comでの設定:**
```
レコードタイプ: CNAME
ホスト名: admin
値: kiichi-1000.github.io
TTL: 3600
```

**GitHubでの設定:**
- リポジトリ: 管理者ページ用の新しいリポジトリを作成
- Custom domain: `admin.yourdomain.com`

**または、Aレコードを使用:**

```
レコードタイプ: A
ホスト名: admin
値: 185.199.108.153（GitHub PagesのIPアドレス）
TTL: 3600
```

（同様に他の3つのIPアドレスも追加）

---

## 🔍 サブドメイン設定の確認方法

### 1. DNS設定が反映されたか確認

ターミナルで以下を実行：

```bash
nslookup blog.yourdomain.com
```

**結果の確認:**
- CNAMEレコードの場合: `kiichi-1000.github.io` と表示される
- Aレコードの場合: `185.199.108.153` などのIPアドレスが表示される

### 2. ブラウザで確認

1. ブラウザを開く
2. アドレスバーに `https://blog.yourdomain.com` を入力（実際のサブドメインに置き換える）
3. Enterキーを押す
4. サイトが表示されることを確認

---

## ⚠️ 重要な注意点

### 1. GitHub Pagesの制限

- **1つのリポジトリ = 1つのカスタムドメイン**
- 異なるサブドメインで異なるコンテンツを表示するには、**別のリポジトリ**が必要

### 2. DNS設定の反映時間

- 通常: 数分〜数時間
- 最大: 48時間（通常はもっと早い）

### 3. HTTPSの有効化

- カスタムドメインを設定すると、自動的にHTTPSが有効化されるまで待つ必要がある
- 通常: 数分〜数時間

---

## 🎯 実用的なサブドメイン例

### よく使われるサブドメイン

1. **www** - メインドメインと同じ（`www.yourdomain.com`）
2. **blog** - ブログ用（`blog.yourdomain.com`）
3. **admin** - 管理者ページ用（`admin.yourdomain.com`）
4. **api** - API用（`api.yourdomain.com`）
5. **mail** - メールサーバー用（`mail.yourdomain.com`）
6. **shop** - ショップ用（`shop.yourdomain.com`）

### Synthera Webでの推奨設定

- **メインドメイン**: `yourdomain.com` - メインサイト
- **www**: `www.yourdomain.com` - メインドメインと同じ（CNAME）
- **blog**: `blog.yourdomain.com` - ブログ用（別リポジトリ）
- **admin**: `admin.yourdomain.com` - 管理者ページ用（別リポジトリまたはAレコード）

---

## 📋 サブドメイン設定チェックリスト

- [ ] どのサブドメインを設定するか決めた
- [ ] お名前.comでログインした
- [ ] DNS設定ページを開いた
- [ ] CNAMEレコード（またはAレコード）を追加した
- [ ] 設定を保存した
- [ ] GitHubリポジトリでカスタムドメインを設定した（必要に応じて）
- [ ] DNS設定が反映された（nslookupで確認）
- [ ] ブラウザでサブドメインにアクセスして確認した

---

## 🆘 トラブルシューティング

### サブドメインが表示されない

**確認方法:**
```bash
nslookup blog.yourdomain.com
```

**解決方法:**
1. お名前.comのDNS設定を確認（ホスト名が正しいか）
2. TTLが短い値（3600）に設定されているか確認
3. 数時間待ってから再度確認

### HTTPSが有効化されない

**解決方法:**
1. GitHub Pagesでカスタムドメインを設定してから数時間待つ
2. 「Enforce HTTPS」チェックボックスを有効化
3. DNS設定が正しく反映されているか確認

### 別のサイトが表示される

**原因:**
- CNAMEレコードの値が間違っている
- 別のリポジトリのカスタムドメインと競合している

**解決方法:**
1. お名前.comのDNS設定を確認
2. GitHubリポジトリのCustom domain設定を確認

---

## 📚 参考リンク

- GitHub Pages カスタムドメイン: https://docs.github.com/ja/pages/configuring-a-custom-domain-for-your-github-pages-site
- お名前.com DNS設定ガイド: https://www.onamae.com/support/guide/help/1267/

---

## 🎉 完了！

これで、お名前.comで購入したドメインにサブドメインを設定できました！

複数のサブドメインを設定することで、異なる用途のサイトを同じドメイン配下で管理できます。

